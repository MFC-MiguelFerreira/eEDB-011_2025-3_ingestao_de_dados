version: 2

sources:
  - name: source_data
    tables:
      - name: bancos
        meta:
          external_location: "read_csv('./data/source/bancos/EnquadramentoInicia_v2.tsv', sep='\t', header=true)"
      - name: glassdoor
        meta:
          external_location: "read_csv('./data/source/empregados/*.csv', sep='|', header=true, union_by_name=true)"
      - name: reclamacoes
        meta:
          external_location: "read_csv_auto('./data/source/reclamacoes/*.csv', sep=';', header=true, encoding='utf-8', ignore_errors=true, union_by_name=true)"
  - name: raw
    tables:
      - name: bancos
        meta:
          external_location: "read_parquet('./data/raw/bancos/bancos.parquet')"
      - name: glassdoor
        meta:
          external_location: "read_parquet('./data/raw/glassdoor/glassdoor.parquet')"
      - name: reclamacoes
        meta:
          external_location: "read_parquet('./data/raw/reclamacoes/reclamacoes.parquet')"
  - name: trusted
    tables:
      - name: bancos
        meta:
          external_location: "read_parquet('./data/trusted/bancos/bancos.parquet')"
      - name: glassdoor
        meta:
          external_location: "read_parquet('./data/trusted/glassdoor/glassdoor.parquet')"
      - name: reclamacoes
        meta:
          external_location: "read_parquet('./data/trusted/reclamacoes/reclamacoes.parquet')" 
  - name: delivery
    tables:
      - name: delivery
        meta:
          external_location: "read_parquet('./data/delivery/delivery.parquet')"
